<template>
  <!-- Master coin select -->
  <div class="select">
    <select v-model="masterCoin" :disabled="isControlsDisabled">
      <option v-for="(coin, i) in dataStore.coins" :value="coin.id" :key="i">{{ coin.symbol }}</option>
    </select>
  </div>
</template>

<script lang="ts">
import Getters from '@/mixins/Getters'
import { Component, Mixins, Watch } from 'vue-property-decorator'

@Component({
  name: 'CoinSelect'
})
export default class CoinSelect extends Mixins(Getters) {
  protected masterCoin = 0

  // Show modal dialog on master coin change
  @Watch('masterCoin')
  protected onMasterCoinChange(masterCoin: string) {
    this.$dialog.confirm({
        title: 'Set coin to all data',
        message: `Are you sure you want to set <b>${masterCoin}</b> as coin to all data?`,
        confirmText: 'Set',
        type: 'is-warning',
        hasIcon: true,
        icon: 'exclamation-triangle',
        iconPack: 'fa',
        onConfirm: () => {
          this.dataStore.commitMasterCoin(masterCoin)
          this.$toast.open('Coin changed!')
        }
    })
  }
}
</script>
